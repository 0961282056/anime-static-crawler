<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‹•ç•«æ–°ç•ªè³‡è¨Šç«™</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    
    <link rel="stylesheet" href="static/css/main.css">
    
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.13.3/dist/cdn.min.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

    <script
    src="https://browser.sentry-cdn.com/7.114.0/bundle.tracing.replay.min.js"
    crossorigin="anonymous"
    ></script>

    <script>
        Sentry.init({
            dsn: "https://9fc46d2a07536c7a992c37ba79873b1e@o4510496583450624.ingest.us.sentry.io/4510496645513216", 
            integrations: [
                new Sentry.BrowserTracing(),
                new Sentry.Replay(),
            ],
            tracesSampleRate: 1.0, 
            replaysSessionSampleRate: 0.1, 
            replaysOnErrorSampleRate: 1.0, 
        });
    </script>
    
    
<meta name="description" content="å¿«é€ŸæŸ¥è©¢å‹•ç•«è³‡æ–™">
<script>
    // å°‡å¾Œç«¯è®Šæ•¸æ³¨å…¥åˆ°å…¨åŸŸï¼Œä¾› Alpine.js è®€å–
    window.SERVER_DATA = {
        defaultYear: "2025",
        defaultSeason: "ç§‹",
        availableData: JSON.parse('{"2018": ["å†¬", "æ˜¥", "å¤", "ç§‹"], "2019": ["å†¬", "æ˜¥", "å¤", "ç§‹"], "2020": ["å†¬", "æ˜¥", "å¤", "ç§‹"], "2021": ["å†¬", "æ˜¥", "å¤", "ç§‹"], "2022": ["å†¬", "æ˜¥", "å¤", "ç§‹"], "2023": ["å†¬", "æ˜¥", "å¤", "ç§‹"], "2024": ["å†¬", "æ˜¥", "å¤", "ç§‹"], "2025": ["å†¬", "æ˜¥", "å¤", "ç§‹"], "2026": ["å†¬", "æ˜¥", "å¤", "ç§‹"]}')
    };
</script>

</head>
<body>
    
    
<div x-data="animeApp()" x-init="initApp()" class="app-wrapper">

    <header class="site-header">
        <div class="container header-container">
            <div class="logo-area">
                <h1 class="logo-text">ğŸ“º å‹•ç•«æ–°ç•ªè³‡è¨Šç«™</h1>
            </div>
        </div>
    </header>

    <div class="container main-layout">
        <aside class="control-panel">
            <div class="panel-inner">
                <h3 class="panel-title"><i class="fas fa-filter"></i> ç¯©é¸æ¢ä»¶</h3>
                
                <div class="form-group">
                    <label for="searchInput" class="form-label">é—œéµå­—æœå°‹</label>
                    <div class="input-icon-wrapper">
                        <input type="text" id="searchInput" class="form-control" x-model="searchKeyword" placeholder="è¼¸å…¥å‹•ç•«åç¨±...">
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">å¹´ä»½</label>
                    <select class="form-select" x-model="year" @change="updateSeasonOptions()">
                        <template x-for="y in years" :key="y">
                            <option :value="y" x-text="y + ' å¹´'"></option>
                        </template>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">å­£ç¯€</label>
                    <select class="form-select" x-model="season" @change="loadData()">
                        <template x-for="s in seasons" :key="s">
                            <option :value="s" x-text="s + ' ç•ª'"></option>
                        </template>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">æ¯é€±æ”¾é€</label>
                    <select class="form-select" x-model="filterDay">
                        <option value="å…¨éƒ¨">å…¨éƒ¨é¡¯ç¤º</option>
                        <option value="ä¸€">é€±ä¸€</option>
                        <option value="äºŒ">é€±äºŒ</option>
                        <option value="ä¸‰">é€±ä¸‰</option>
                        <option value="å››">é€±å››</option>
                        <option value="äº”">é€±äº”</option>
                        <option value="å…­">é€±å…­</option>
                        <option value="æ—¥">é€±æ—¥</option>
                    </select>
                </div>

                <div class="share-widget">
                    <h3 class="panel-title small"><i class="fas fa-list"></i> åˆ†äº«æ¸…å–®</h3>
                    <div id="shareListContainer">
                        <template x-if="shareList.length === 0">
                            <div class="empty-state" style="color:#888; text-align:center; padding:20px;">å°šç„¡å…§å®¹</div>
                        </template>
                        
                        <template x-for="(item, index) in shareList" :key="index">
                            <div class="share-item">
                                <img :src="item.img" loading="lazy">
                                <div class="share-item-info">
                                    <div class="share-item-title" x-text="item.name"></div>
                                    <div x-text="item.date + ' ' + item.time"></div>
                                </div>
                                <div class="share-remove" @click="removeFromShare(index)" title="ç§»é™¤">
                                    <i class="fas fa-trash-alt"></i>
                                </div>
                            </div>
                        </template>
                    </div>
                    <button id="copyButton" class="action-btn" :disabled="shareList.length === 0" @click="generateShareImage()">
                        <i class="fas fa-image"></i> ç”Ÿæˆåœ–ç‰‡
                    </button>
                </div>
            </div>
        </aside>

        <main class="content-area">
            <div class="content-header">
                <h2 class="section-title">æŸ¥è©¢çµæœ <span class="badge" x-text="filteredAnime.length"></span></h2>
                <span class="update-time" x-text="lastUpdateTime"></span>
            </div>

            <div x-show="loading" class="status-box">
                <i class="fas fa-spinner fa-spin"></i> è³‡æ–™è®€å–ä¸­...
            </div>
            
            <div x-show="!loading && filteredAnime.length === 0" class="status-box" style="display: none;">
                æ²’æœ‰ç¬¦åˆæ¢ä»¶çš„å‹•ç•«
            </div>

            <div class="anime-grid" x-show="!loading">
                <template x-for="anime in filteredAnime" :key="anime.anime_name">
                    <div class="anime-card">
                        <div class="card-img-wrapper">
                            <img :src="anime.anime_image_url && anime.anime_image_url !== 'ç„¡åœ–ç‰‡' ? anime.anime_image_url : 'https://placehold.co/300x450/333/999?text=No+Image'" class="card-img" loading="lazy">
                        </div>
                        <div class="card-body">
                            <h3 class="anime-title" x-text="anime.anime_name" @click="copyText(anime.anime_name)"></h3>
                            <div class="info-row">
                                <span><i class="fas fa-calendar-alt"></i> <span x-text="anime.premiere_date || '?'"></span></span>
                                <span><i class="fas fa-clock"></i> <span x-text="anime.premiere_time || '?'"></span></span>
                            </div>
                            
                            <div class="story-box" :title="anime.story" @click="showStory(anime.anime_name, anime.story)" x-text="anime.story || 'æš«ç„¡ç°¡ä»‹'"></div>
                            
                            <div style="margin-top: auto;">
                                <button class="btn-add mb-2" @click="addToShare(anime)">
                                    <i class="fas fa-plus"></i> åŠ å…¥æ¸…å–®
                                </button>
                                <a :href="'https://ani.gamer.com.tw/search.php?keyword=' + encodeURIComponent(anime.anime_name)" 
                                   target="_blank" class="btn-add" style="border-color: #00cec9; color: #00cec9;">
                                    ğŸ“º å‹•ç•«ç˜‹æœå°‹
                                </a>
                            </div>
                        </div>
                    </div>
                </template>
            </div>
        </main>
    </div>

    <button id="backToTopBtn" :class="{ 'show': showBackToTop }" @click="scrollToTop()">
        <i class="fas fa-arrow-up"></i>
    </button>

</div>


    <script src="static/js/main.js"></script>
</body>
</html>